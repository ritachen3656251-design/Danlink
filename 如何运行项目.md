# 无法识别 npm / 禁止运行脚本 的解决办法

## 报错：「无法加载文件 npm.ps1，因为在此系统上禁止运行脚本」

这是 **PowerShell 禁止运行脚本** 导致的，npm 在 Windows 上会调用 `npm.ps1`，被拦截了。

### 解决方式一：放宽当前用户的执行策略（推荐）

1. 在 **PowerShell** 里（以**管理员身份**打开更稳妥）执行：
   ```powershell
   Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
   ```
2. 出现提示时输入 **Y** 回车
3. 关闭终端，重新打开，再在项目目录执行：
   ```bash
   npm install
   npm run dev
   ```

### 解决方式二：改用「命令提示符」cmd，不用 PowerShell

1. 按 **Win + R**，输入 **cmd** 回车，打开命令提示符
2. 进入项目目录，例如：
   ```cmd
   cd /d "C:\Users\lenovo\Downloads\旦link-(danlink)"
   ```
3. 执行：
   ```cmd
   npm install
   npm run dev
   ```

或在 Cursor 里把**默认终端**改成 cmd：  
**文件 → 首选项 → 设置**，搜索 **terminal default profile windows**，选 **Command Prompt**，然后重新打开终端。

---

## 报错：「无法将 npm 识别为 cmdlet、函数、脚本文件或可运行程序名称」

说明系统里没有可用的 Node.js/npm，或终端找不到它们。

## 方法一：安装 Node.js（推荐）

1. 打开浏览器访问：**https://nodejs.org/zh-cn**
2. 下载并安装 **LTS（长期支持版）**
3. 安装时勾选 **「Add to PATH」**（添加到环境变量）
4. 安装完成后 **关闭所有终端和 Cursor**，再重新打开
5. 在项目文件夹里打开终端，执行：
   ```bash
   npm install
   npm run dev
   ```
6. 浏览器打开：**http://localhost:3000**

## 方法二：已安装 Node 但终端仍找不到

可能是安装时没有加入 PATH，或当前终端没刷新环境变量。

1. **确认安装位置**（常见路径）：
   - `C:\Program Files\nodejs\`
   - `C:\Users\你的用户名\AppData\Local\Programs\node\`

2. **手动加到 PATH**：
   - 按 `Win + R`，输入 `sysdm.cpl` 回车
   - 选「高级」→「环境变量」
   - 在「用户变量」或「系统变量」里找到 `Path`，点「编辑」
   - 新建一项，填入 Node 安装目录（如 `C:\Program Files\nodejs`）
   - 确定保存后，**关闭并重新打开** 终端 / Cursor

3. **或用「Node.js 命令提示符」**：
   - 开始菜单里找「Node.js command prompt」并打开
   - 在该窗口里 `cd` 到项目目录，再执行 `npm install` 和 `npm run dev`

## 方法三：用 Cursor 内置终端

1. 在 Cursor 里按 **Ctrl + `** 打开终端
2. 若仍提示找不到 npm，说明本机未正确安装 Node.js，请先按 **方法一** 安装

---

安装好 Node 并能在终端里运行 `node -v` 和 `npm -v` 后，在项目根目录执行：

```bash
npm install
npm run dev
```

然后在浏览器打开 **http://localhost:3000** 即可。
